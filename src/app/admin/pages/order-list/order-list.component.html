<div fxLayout="row wrap" fxLayoutAlign="center center"
  *ngIf="!ordersOfThDayList.length && ordersOfThDayList.length > 0">
  <mat-spinner></mat-spinner>
</div>
<!-- TODO: réimplémenter le spinner ou voir pour un skeleton sinon -->
<!-- TODO: voir pour mettre un effet de slide et centrer le aucune commande message -->

<ul class="nav nav-tabs">
  <li class="nav-item" *ngFor="let days of tabsLabels; let i = index">
    <div class="nav-link" id="{{i}}" (click)="getOrdersOfTheDay(i)">{{tabsLabels[i] | titlecase}}</div>
  </li>
</ul>
<div class="text-center mt-5" *ngIf="!ordersOfThDayList.length && ordersOfThDayList.length === 0">
  <h5>Il n'y a actuellement aucune commande.</h5>
</div>
<app-card *ngFor="let orderData of ordersOfThDayList">
  <div card-header>
    <div class="d-flex flex-row flex-wrap justify-content-between">
      <h4 class="card-title text-start">{{ orderData.name }}</h4>
      <h6 class="card-title text-end">
        Livraison le
        {{ orderData.deliveryDate.toDate() | date: "EEEE d MMMM y"
        }}{{
        orderData?.deliveryTime ? " à " + orderData.deliveryTime : ""
        }}
      </h6>
    </div>
    <div class="d-flex flex-row flex-wrap justify-content-between">
      <a class="card-subtitle text-muted text-start" href="tel:{{orderData.phone}}">
        Tel: {{ orderData.phone }}
      </a>
      <div class="card-subtitle text-muted text-end">Commandé le
        {{ orderData.orderDate.toDate() | date: "EEEE d MMMM y" }} à
        {{ orderData.orderDate.toDate() | date: "h:mm" }}
      </div>
    </div>
  </div>
  <div card-body>
    <!-- Gestion des adresses -->
    <div *ngIf="!orderData.deliveryAddress; else mulitpleAddress">
      <h6>Adresse de livraison et facturation :</h6>
      <div>
        {{ orderData.address.street }}
      </div>
      <div>
        <span>
          {{ orderData.address.zipCode }}
        </span>
        <span>
          {{ orderData.address.city }}
        </span>
      </div>
    </div>
    <ng-template #mulitpleAddress>
      <div>
        <h6>Adresse de facturation :</h6>
        <div>{{ orderData.address.street }}</div>
        <div>
          <span>
            {{ orderData.address.zipCode }}
          </span>
          <span>
            {{ orderData.address.city }}
          </span>
        </div>
      </div>
      <div>
        <h6>Adresse de livraison :</h6>
        <div>{{ orderData.deliveryAddress.street }}</div>
        <div>
          <span>
            {{ orderData.deliveryAddress.zipCode }}
          </span>
          <span>
            {{ orderData.deliveryAddress.city }}
          </span>
        </div>
      </div>
    </ng-template>
    <!-- Commentaires -->
    <h5 *ngIf="orderData.orderComment" class="card-title mt-3">Commentaires</h5>
    <div *ngIf="orderData.orderComment">
      <pre>{{ orderData.orderComment }}</pre>
    </div>
    <!-- Produits -->
    <h5 class="card-title mt-3">Produits</h5>
    <div *ngFor="let elem of orderData.order">
      -&nbsp;{{ elem?.product }}&nbsp;:&nbsp;
      {{ elem?.quantity }}
      &nbsp;{{ elem?.unit
      }}<span *ngIf="elem && elem.quantity && elem.quantity > 1">s</span>
      <span *ngIf="elem && elem.isSliced">&nbsp;/&nbsp;Tranché</span>
      <span *ngIf="elem && elem.comment">&nbsp;/&nbsp;Commentaire&nbsp;:&nbsp;{{ elem.comment }}</span>
    </div>
    <h5 class="card-title text-end mt-3">Prix total: {{ orderData?.totalPrice?.toFixed(2)
      }} €
      H.T.</h5>
  </div>
</app-card>